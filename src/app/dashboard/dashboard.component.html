<div *ngIf="afService.user">
  <div class="container-fluid">
    <div class="row">
      <div *ngIf="isStudent()">
        <div class="col-md-1 col-lg-offset-0">
          <button type="button" class="btn btn-primary" (click)="goBack()">Back</button>
        </div>
        <div class="col-lg-5 col-lg-offset-0">
          <div class="bs-example" id = "questions">
            <div *ngFor="let bubble of bubbleLog" >
              <div *ngIf="bubble.isFrom == false">
                <div class="question">
                  <p>{{bubble.text}}</p>
                </div>
              </div>
              <div *ngIf="bubble.isFrom == true" >
                <div class="response">
                  <p>{{bubble.text}}</p>
                </div>
              </div>
            </div>
          </div>
          <figure class="highlight">

            <!-- Point: 3 -->
            <input type="textarea" class="question-text" [(ngModel)]="newQuestion" (keyup.enter)="askQuestion()">
            <a class="ask-question" (click)="askQuestion()">Ask Question</a>
            <div *ngIf="hasAnswer == true">
              <p>Does this answer your question?</p>
              <a class="ask-question" (click)="answeredQuestion(true)">Yes</a>
              <a class="ask-question" (click)="answeredQuestion(false)">No</a>
            </div>

          </figure>
        </div>
        <div class="col-md-5 col-lg-offset-0">
          <div #scrollMe class='bs-example' id='messages'>

            <!-- Point: 1 -->
            <div *ngFor="let message of afService.messages | async">
              <!-- Point: 2 -->
              <div class="bubble" [class.you]="isYou(message.email)" [class.me]="isMe(message.email)">
                <p class="message">{{ message.message }}
                  <button type='button' class='up-vote' (click)="upvote(message.$key, message.votes)"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true">{{message.votes}}</span>
                  </button>
                </p>
                <div class="author">
                  {{ message.timestamp | date:"MM/dd/yy hh:mm a" }}
                  <a *ngIf="isMe(message.email)" type='edit' class='edit-text' style="cursor: pointer;" (click)="show(message.$key, message.message)">Edit</a>
                  <app-edit-message-modal>
                    <div class="app-modal-header">
                      Edit message
                    </div>
                    <div class="app-modal-body">
                      <label for="modalMessage" class="sr-only">Message</label>
                      <input #modalMessage type="subject-message" id="modalMessage" class="form-control" required="" value="{{getModalMessage()}}">
                    </div>
                    <div class="app-modal-footer">
                      <button type="button" class="btn btn-default" (click)="hide()">Close</button>
                      <button type="button" class="btn btn-primary" (click)="sendEdit(getModalMessageKey(), modalMessage.value)">Save Edit</button>
                    </div>
                  </app-edit-message-modal>
                  <a *ngIf="isMe(message.email)" type='delete' class='delete-text' style="cursor: pointer;" (click)="delete(message.$key)">Delete</a>
                </div>
              </div>
            </div>
          </div>
          <figure class="highlight">

            <!-- Point: 3 -->
            <input type="textarea" class="message-text" [(ngModel)]="newMessage" (keyup.enter)="sendMessage()">
            <a class="send-message" (click)="sendMessage()">SEND</a>

          </figure>
        </div>
      </div>

      <div *ngIf="isLecturer()">
        <div class="col-md-1 col-lg-offset-0">
          <button type="button" class="btn btn-primary" (click)="goBack()">Back</button>
        </div>
        <div class="col-md-8 col-lg-offset-1">
          <div #scrollMe class='bs-example' id='messages'>

            <!-- Point: 1 -->
            <div *ngFor="let message of afService.messages | async">

              <!-- Point: 2 -->
              <div class="bubble" [class.you]="isYou(message.email)" [class.me]="isMe(message.email)">
                <p class="message">{{ message.message }}
                </p>
                <div class="author">
                  {{ message.timestamp | date:"MM/dd/yy hh:mm a" }}
                </div>
              </div>
            </div>
          </div>
          <button class="btn btn-md btn-primary btn-block" type="button" (click)="endSession()">End Session</button>
        </div>
      </div>
    </div>
  </div>
</div>
